<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Editor</title>
<style>
body{font-family:system-ui,sans-serif;padding:20px;background:#f9f9f9;}
textarea,button,select{width:100%;padding:10px;margin:5px 0;font-size:16px;}
</style>
</head>
<body>

<h2>Editor for Materials</h2>

<label>Select sheet:</label>
<select id="sheetSelect">
  <option value="Wire">Wire</option>
  <option value="Boxs/covers">Boxs/covers</option>
  <option value="Connectors/Straps">Connectors/Straps</option>
  <option value="Recepticals/Switches/Plugs">Recepticals/Switches/Plugs</option>
  <option value="Conduit">Conduit</option>
  <option value="Breakers">Breakers</option>
</select>

<label>JSON content of sheet:</label>
<textarea id="jsonArea" rows="15"></textarea>

<button onclick="loadSheet()">Load Sheet</button>
<button onclick="saveSheet()">Save Sheet</button>

<div id="status"></div>

<script>
let data = {};

async function loadData(){
  const res = await fetch("data.json");
  data = await res.json();
}
loadData();

function loadSheet(){
  const sheet = document.getElementById("sheetSelect").value;
  document.getElementById("jsonArea").value=JSON.stringify(data[sheet],null,2);
  document.getElementById("status").textContent="";
}

function saveSheet(){
  const sheet = document.getElementById("sheetSelect").value;
  try{
    const newSheet = JSON.parse(document.getElementById("jsonArea").value);
    data[sheet]=newSheet;
    // Скачать новый JSON
    const blob = new Blob([JSON.stringify(data,null,2)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url; a.download="data.json"; a.click();
    URL.revokeObjectURL(url);
    document.getElementById("status").textContent="JSON saved. Replace old data.json with this file.";
  }catch(e){
    document.getElementById("status").textContent="Error parsing JSON: "+e.message;
  }
}
</script>

</body>
</html>
